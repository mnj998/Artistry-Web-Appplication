/*---------------------------------------------------------------------------------
	fCarousel by FRO1D
	Author: Andrey Litvinov (FRO1D)
	Version: 2.4.1
---------------------------------------------------------------------------------*/
(function(d){"use strict";d.fn.fCarousel=function(E){var v=d.extend({visibleItems:1,separation:200,distance:200,sideItemsAlign:0,perspective:0,orientation:"horizontal",responsive:{},opacity:1,centerItem:0,centerClass:"carousel_center",speed:300,easing:"ease-out",itemsNav:!0,arrows:!1,arrowsText:["",""],arrowsClass:["","",""],swipe:!0,mousewheel:!1,autoplay:!1,stopOnHover:!0,beforeChange:d.noop,onChange:d.noop,afterChange:d.noop,clickedCenter:d.noop},E);return this.each(function(){function k(a,c){var d={};d["-webkit-"+a]=c;d["-moz-"+a]=c;d["-ms-"+a]=c;d["-o-"+a]=c;d[a]=c;return d}function x(a){function h(m){clearInterval(p);c.hasClass("inited")&&a.beforeChange(c,c.find("."+a.centerClass));var g=m.index();r=0<m.index()?m.prev():e.eq(e.length-1);q=m.index()<e.length-1?m.next():e.eq(0);c.data({items:e.length,centerItem:m,prevItem:r,nextItem:q});m.data("newPos",f);for(var b=g-1,h=1;;b--,h++)if(h<=f)0<=b?e.eq(b).data("newPos",f-h):e.eq(e.length+b).data("newPos",f-h);else if(h>f&&0<=b)for(var k=b;k>=f-(e.length-g-1);k--)e.eq(k).data("newPos",2*f+1);else break;for(var b=g+1,h=1,l=0;;b++,h++)if(h<=f)b<=e.length-1?e.eq(b).data("newPos",f+h):(e.eq(l).data("newPos",f+h),l++);else if(h>f&&b<=e.length-1)for(k=b;k<=e.length-1-(f-g);k++)e.eq(k).data("newPos",2*f+1);else break;e.each(function(){d(this).css(y[d(this).data("newPos")])});if(c.hasClass("inited"))a.onChange(c);setTimeout(function(){e.removeClass(a.centerClass);m.addClass(a.centerClass);c.hasClass("inited")?a.afterChange(c,m):c.addClass("inited");n&&w()},a.speed)}function w(){clearInterval(p);p=setInterval(function(){h(q)},n)}c.css(d.extend({position:"relative",opacity:0},k("perspective",800)));e.css(d.extend({margin:"auto",position:"absolute",left:0,right:0,top:0,bottom:0},k("transition-property","transform, opacity"),k("transition-duration",a.speed+"ms"),k("transition-timing-function",a.easing),k("transition-delay","0s")));for(var f=a.visibleItems,y=[],b,l,t,g=0;g<f;g++)b=-(a.separation*(f-g)),t=-(a.distance*(f-g)),l=a.sideItemsAlign*(f-g),"horizontal"==a.orientation?(b="translate3d("+b+"px,"+l+"px,"+t+"px)",l="rotateY("+a.perspective+"deg)"):(b="translate3d("+l+"px,"+b+"px,"+t+"px)",l="rotateX("+a.perspective+"deg)"),b=d.extend({opacity:a.opacity,zIndex:g+1},k("transform-origin","0 50%"),k("transform",b+" "+l)),y.push(b);b=d.extend({opacity:1,zIndex:f+1},k("transform-origin","50% 50%"),k("transform","translate3d(0px,0px,0px)"));y.push(b);for(g=0;g<f;g++)b=a.separation*(g+1),t=-(a.distance*(g+1)),l=a.sideItemsAlign*(g+1),"horizontal"==a.orientation?(b="translate3d("+b+"px,"+l+"px,"+t+"px)",l="rotateY(-"+a.perspective+"deg)"):(b="translate3d("+l+"px,"+b+"px,"+t+"px)",l="rotateX(-"+a.perspective+"deg)"),b=d.extend({opacity:a.opacity,zIndex:f-g},k("transform-origin","100% 50%"),k("transform",b+" "+l)),y.push(b);b=d.extend({opacity:0,zIndex:0},k("transform-origin","50% 50%"),k("transform","translate3d(0px,0px,"+-(a.distance*f)+"px)"));y.push(b);var r,q,g=0==a.centerItem?e.eq(Math.floor(e.length/2)):e.eq(a.centerItem-1);h(g);c.animate({opacity:1},2*a.speed);e.on("click",function(){d(this).hasClass(a.centerClass)?a.clickedCenter(c,d(this)):a.itemsNav&&c.hasClass("inited")&&h(d(this))});e.each(function(){var b=d(this);b.find("a").on("click",function(d){if(c.hasClass("inited")&&!b.hasClass(a.centerClass)&&a.itemsNav)return h(b),!1})});a.arrows&&(c.append('<a href="#" class="arrow '+a.arrowsClass[0]+" "+a.arrowsClass[1]+' prev">'+a.arrowsText[0]+"</a>"),c.append('<a href="#" class="arrow '+a.arrowsClass[0]+" "+a.arrowsClass[1]+' next">'+a.arrowsText[1]+"</a>"),c.children(".arrow").on("click",function(){d(this).hasClass("prev")?h(r):h(q);return!1}));if(a.mousewheel&&d.event.special.mousewheel)c.on("mousewheel",function(a){if(c.hasClass("inited"))return 0>a.deltaY?h(q):h(r),!1});if(a.swipe){var v=0,x=0,z=!1,A=!1,u,B;c.addClass("draggable").on("mousedown touchstart",function(b){c.hasClass("inited")&&a.swipe&&(v=(A=b.clientX?!1:!0)?event.touches[0].pageX:b.clientX,x=A?event.touches[0].pageY:b.clientY,z=!0,clearInterval(p))}).on("mousemove touchmove",function(b){if(z){var d=A?event.touches[0].pageX:b.clientX,d=d-v;b=A?event.touches[0].pageY:b.clientY;b-=x;u="horizontal"==a.orientation?d:b;B="horizontal"==a.orientation?"left":"top";c.find("."+a.centerClass).css(B,u/4);if(Math.abs(u)>Math.abs(b)||"vertical"==a.orientation)return!1}}).on("mouseup mouseleave touchend",function(){z&&(z=!1,B="horizontal"==a.orientation?"left":"top",c.find("."+a.centerClass).css(B,0),Math.abs(u)>a.separation/2&&(0>u?h(q):h(r)),u=0,n&&w())})}var p,n=!1;a.autoplay&&(n=a.autoplay,w());g=c.children(".arrow");a.stopOnHover&&(g=g.add(c),g=g.add(e));g.on("mousedown touchstart mousemove touchmove",function(){n&&clearInterval(p)}).on("mouseup mouseleave touchend",function(){n&&w()});c.on("jumpToPrev",function(){h(r)});c.on("jumpToNext",function(){h(q)});c.on("jumpTo",function(a,b){var d=e.eq(b-1);h(d)});c.on("play",function(a,b){b&&!n&&(n=b,w())});c.on("stop",function(){n=!1;clearInterval(p)});c.on("destroy",function(){clearInterval(p);c.removeClass("inited draggable").css(k("perspective","none"));e.removeClass(a.centerClass).css(d.extend({opacity:1,position:"static",top:"auto",right:"auto",bottom:"auto",left:"auto"},k("transition","none"),k("transform","none")));c.children(".arrow").remove()})}function C(a){if("object"==typeof a.responsive&&0<Object.keys(a.responsive).length){var c=a.responsive,e=0,f;for(f in c)c.hasOwnProperty(f)&&window.innerWidth>=parseInt(f,10)&&(e=parseInt(f,10));return d.extend({},a,c[e])}return a}var c=d(this),e=d(this).find('[class*="item"]');x(C(v));var D=d(window).width();d(window).on("resize",function(){d(window).width()!=D&&(c.trigger("destroy"),x(C(v)),D=d(window).width())})})}})(jQuery);